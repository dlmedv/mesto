(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}var i=n((function t(e,n,o){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"_getTemplate",(function(){return document.querySelector(i._templateSelector).content.querySelector(".element").cloneNode(!0)})),r(this,"_setEventListeners",(function(){i._element.querySelector(".element__icon-trash").addEventListener("click",(function(t){i._deleteCard(t)})),i._element.querySelector(".element__icon").addEventListener("click",(function(t){i._toggleCardLike(t)})),i._element.querySelector(".element__photo").addEventListener("click",(function(){i._getCardPopupImg()}))})),r(this,"_deleteCard",(function(t){t.preventDefault(),i._element.remove(),i._element=null})),r(this,"_toggleCardLike",(function(t){t.target.classList.toggle("element__icon_active")})),r(this,"_getCardPopupImg",(function(){i._handleCardClick(i._name,i._link)})),r(this,"generateCard",(function(){i._element=i._getTemplate(),i._setEventListeners();var t=i._element.querySelector(".element__photo");return t.src=i._link,t.alt=i._name,i._element.querySelector(".element__title").textContent=i._name,i._element})),this._name=e.name,this._link=e.link,this._templateSelector=n,this._handleCardClick=o}));function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._formElement=n,this._inputList=Array.from(n.querySelectorAll(e.inputSelector)),this._buttonElement=n.querySelector(e.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-input-error"));e.classList.remove(this._config.errorClass),e.textContent="",t.classList.remove(this._config.inputErrorClass)}},{key:"_showInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-input-error"));e.classList.add(this._config.errorClass),e.textContent=t.validationMessage,t.classList.add(this._config.inputErrorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners(),this._formElement.addEventListener("submit",(function(t){t.preventDefault()}))}},{key:"setButtonState",value:function(){this._toggleButtonState()}},{key:"clearInputError",value:function(){var t=this;this._inputList.forEach((function(e){t._checkInputValidity(e)}))}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),a={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===s(o)?o:String(o)),r)}var o}var p=function(){function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._container=document.querySelector(n),this._renderer=o}var e,n;return e=t,(n=[{key:"renderItems",value:function(){var t=this;this._renderedItems.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&f(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===y(o)?o:String(o)),r)}var o}var b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_active"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_active"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){(e.target.classList.contains("popup_active")||e.target.classList.contains("popup__close"))&&t.close()}))}}])&&m(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===v(o)?o:String(o)),r)}var o}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=h(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},_.apply(this,arguments)}function h(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function g(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=w(r);if(o){var n=w(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._formSubmit=e,n._form=n._popup.querySelector(".popup__form"),n._inputs=n._form.querySelectorAll(".popup__input"),n}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._inputsValues={},this._inputs.forEach((function(e){t._inputsValues[e.name]=e.value})),this._inputsValues}},{key:"setEventListeners",value:function(){var t=this;_(w(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(){t._formSubmit(t._getInputValues()),t.close()}))}},{key:"close",value:function(){_(w(u.prototype),"close",this).call(this),this._form.reset()}}])&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(b);function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==j(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===j(o)?o:String(o)),r)}var o}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=O(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},k.apply(this,arguments)}function O(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=q(t)););return t}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function L(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},q(t)}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=q(r);if(o){var n=q(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return L(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupImage=e._popup.querySelector(".popup__image"),e._popupTitle=e._popup.querySelector(".popup__title-img"),e}return e=u,(n=[{key:"open",value:function(t,e){this._popupImage.src=t,this._popupImage.alt=e,this._popupTitle.textContent=e,k(q(u.prototype),"open",this).call(this)}}])&&P(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(b);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V(r.key),r)}}function B(t,e,n){return e&&R(t.prototype,e),n&&R(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function x(t,e,n){return(e=V(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V(t){var e=function(t,e){if("object"!==T(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===T(e)?e:String(e)}var D=B((function t(e){var n=this,r=e.user,o=e.about;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,"getUserInfo",(function(){return{user:n._user.textContent,about:n._about.textContent}})),x(this,"setUserInfo",(function(t){var e=t.user,r=t.about;n._user.textContent=e,n._about.textContent=r})),this._user=r,this._about=o})),U=(document.querySelector(".popup_photo"),document.querySelector(".popup__image"),document.querySelector(".popup__title-img"),document.querySelector(".profile__edit")),A=(document.querySelector(".popup_edit-card"),document.querySelector(".popup__form")),M=document.querySelector(".popup__add-form"),z=(document.querySelector(".popup__input_type_title"),document.querySelector(".popup__input_type_link"),document.querySelector(".popup__input_type_name")),N=document.querySelector(".popup__input_type_about"),F=document.querySelector(".profile__title"),G=document.querySelector(".profile__subtitle"),H=(document.querySelector(".elements"),document.querySelector(".profile__add")),J=(document.querySelector(".popup_add-card"),document.querySelectorAll(".popup__close"),{user:F,about:G});function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==K(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===K(o)?o:String(o)),r)}var o}new(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e.url,this.headers=e.headers}var e,n;return e=t,(n=[{key:"getInitialCards",value:function(){return fetch("".concat(this.url,"/cards"),{headers:this.headers}).then((function(t){return t.ok?t.json:Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"getInfoUsers",value:function(){return fetch("".concat(this.url,"/users/me "),{headers:this.headers}).then((function(t){return t.ok?t.json:Promise.reject("Ошибка: ".concat(t.status))}))}}])&&Q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}())({url:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"e24dd49a-4101-455b-9fb5-311038dfd707","Content-Type":"application/json"}}).getInitialCards().then((function(){var t=new p({items:[],renderer:function(e){var n=W(e);t.addItem(n)}},".elements");t.renderItems()}));var W=function(t){return new i(t,"#element-template",(function(){$.open(t.link,t.name)})).generateCard()},X=new D(J),Y=new E(".popup_edit-card",(function(t){X.setUserInfo(t)})),Z=new E(".popup_add-card",(function(t){var e=W(t);cardList.addItem(e)})),$=new I(".popup_photo");U.addEventListener("click",(function(t){t.preventDefault();var e=X.getUserInfo(),n=e.user,r=e.about;z.value=n,N.value=r,Y.open(),et.clearInputError()})),H.addEventListener("click",(function(){Z.open(),tt.setButtonState()})),Y.setEventListeners(),Z.setEventListeners(),$.setEventListeners();var tt=new l(a,M),et=new l(a,A);tt.enableValidation(),et.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJeEUsRUFBS3dFLEVBQU0scUJBQzVCLFdBQVF3RCxFQUFXQyxLQUFLekQsRUFBS3pDLEtBQU15QyxFQUFLMUMsS0FBTSxJQUNyQm9HLGNBRTdCLEVBZU1DLEVBQVcsSUFBSWxDLEVBQVNZLEdBR3hCdUIsRUFBa0IsSUFBSWhELEVEL0JOLG9CQ2lDbEIsU0FBQ2tCLEdBQ0c2QixFQUFTRSxZQUFZL0IsRUFDekIsSUFHRWdDLEVBQWUsSUFBSWxELEVEdkNQLG1CQ3lDZCxTQUFDWixHQUNHLElBQU1vRCxFQUFPQyxFQUFXckQsR0FDeEJtRCxTQUFTRyxRQUFRRixFQUNyQixJQUVFSSxFQUFhLElBQUlsQyxFRDVDTCxnQkMrQ2xCUyxFQUF1QjdGLGlCQUFpQixTQUNwQyxTQUFDQyxHQUNHQSxFQUFJSSxpQkFDTCxNQUFzQm9ILEVBQVNJLGNBQXhCckMsRUFBSSxFQUFKQSxLQUFNQyxFQUFLLEVBQUxBLE1BQ1pPLEVBQVVmLE1BQVFPLEVBQ2xCUyxFQUFXaEIsTUFBUVEsRUFDbkJpQyxFQUFnQkgsT0FDaEJPLEdBQWNDLGlCQUNsQixJQUVKN0IsRUFBV2xHLGlCQUFpQixTQUN4QixXQUNJNEgsRUFBYUwsT0FDYlMsR0FBYUMsZ0JBQ2pCLElBRUpQLEVBQWdCUSxvQkFDaEJOLEVBQWFNLG9CQUNiWixFQUFXWSxvQkFHWCxJQUFNRixHQUFlLElBQUkxRyxFQUFjK0IsRUFBa0IwQyxHQUNuRCtCLEdBQWdCLElBQUl4RyxFQUFjK0IsRUFBa0J5QyxHQUMxRGtDLEdBQWFHLG1CQUNiTCxHQUFjSyxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29uc3RhbnRzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8v0LrQu9Cw0YHRgSBDYXJkLCDQutC+0YLQvtGA0YvQuSDRgdC+0LfQtNCw0ZHRgiDQutCw0YDRgtC+0YfQutGDINGBINGC0LXQutGB0YLQvtC8INC4INGB0YHRi9C70LrQvtC5INC90LAg0LjQt9C+0LHRgNCw0LbQtdC90LjQtVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcblxuICAgIH1cbiAgICBfZ2V0VGVtcGxhdGUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAgICAgICAuY29udGVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcbiAgICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSlcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICAgIH1cbiAgICBcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faWNvbi10cmFzaCcpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZGVsZXRlQ2FyZChldnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faWNvbicpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQ2FyZExpa2UoZXZ0KTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5fZWxlbWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19waG90bycpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0Q2FyZFBvcHVwSW1nKCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfZGVsZXRlQ2FyZCA9IChldnQpID0+IHtcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgIH1cblxuICAgIF90b2dnbGVDYXJkTGlrZSA9IChldnQpID0+IHtcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19pY29uX2FjdGl2ZScpO1xuICAgIH1cblxuICAgIF9nZXRDYXJkUG9wdXBJbWcgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxuICAgIH1cblxuICAgIGdlbmVyYXRlQ2FyZCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRQaG90byA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3Bob3RvJyk7XG4gICAgICAgIGVsZW1lbnRQaG90by5zcmMgPSB0aGlzLl9saW5rO1xuICAgICAgICBlbGVtZW50UGhvdG8uYWx0ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gICAgfVxufVxuIiwiLy8g0LLQsNC70LjQtNCw0YbQuNGPXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWlucHV0LWVycm9yYCk7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIH1cblxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1pbnB1dC1lcnJvcmApO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgfVxuXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSk7XG4gICAgfVxuXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldEJ1dHRvblN0YXRlKCkge1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIH1cblxuICAgIGNsZWFySW5wdXRFcnJvcigpIHtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gICAge1xuICAgICAgICBuYW1lOiAn0JDRgNGF0YvQtycsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXG4gICAgfVxuXTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XG4gICAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJywgLy8g0YHQtdC70LXQutGC0L7RgCDRhNC+0YDQvNGLXG4gICAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLCAvLyDRgdC10LvQtdC60YLQvtGAIGlucHV0XG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbicsLy8g0YHQtdC70LXQutGC0L7RgCDQutC90L7Qv9C60Lggc3VibWl0XG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b25fZGlzYWJsZWQnLC8vINGB0L7RgdGC0L7Rj9C90LjQtSDQutC90L7Qv9C60Lggc3VibWl0XG4gICAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLCAvLyDQv9C+0LTRh9C10YDQutC40LLQsNC90LjQtSDQutGA0LDRgdC90YvQvCBpbnB1dFxuICAgIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZSdcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zOyAvL9C80LDRgdGB0LjQsiDQtNCw0L3QvdGL0YVcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID1cbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpOyAvLyDQutGD0LTQsCDQtNC+0LHQsNCy0LvRj9C10LwgXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7IC8v0YTRg9C90LrQuNGG0Y8g0L7RgtGA0LjRgdC+0LLQutC4INC4INGB0L7Qt9C00LDQvdC40Y9cbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcygpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9hY3RpdmUnKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9hY3RpdmUnKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfYWN0aXZlJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgZm9ybVN1Ym1pdCkge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fZm9ybVN1Ym1pdCA9IGZvcm1TdWJtaXQ7IC8v0LrQvtC70LHQtdC6INGB0LDQvNCx0LjRgtCwINGE0L7RgNC80YtcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgICAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcbiAgICB9XG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgICB0aGlzLl9pbnB1dHNWYWx1ZXMgPSB7fTtcbiAgICAgICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0cykgPT4ge1xuICAgICAgICAgICAgdGhpcy5faW5wdXRzVmFsdWVzW2lucHV0cy5uYW1lXSA9IGlucHV0cy52YWx1ZTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0c1ZhbHVlcztcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcblxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KSBcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcblxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuICAgICAgICB0aGlzLl9wb3B1cFRpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX190aXRsZS1pbWcnKTtcbiAgICB9XG5cbiAgICBvcGVuKGxpbmssIG5hbWUpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICBcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IgKHt1c2VyLCBhYm91dCB9KSB7XG4gICAgICAgIHRoaXMuX3VzZXIgPSB1c2VyO1xuICAgICAgICB0aGlzLl9hYm91dCA9IGFib3V0O1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvID0gKCkgPT4geyAvLyDQstC+0LfQstGA0LDRidCw0LXQvCDQvtCx0YrQtdC60YIg0YEg0LTQsNC90L3Ri9C80Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjogdGhpcy5fdXNlci50ZXh0Q29udGVudCxcbiAgICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHNldFVzZXJJbmZvID0gKHVzZXJEYXRhKSA9PiB7IC8vINC/0YDQuNC90LjQvNCw0LXQvCDQvdC+0LLRi9C1INC00LDQvdC90YvQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbiAgICAgICAgY29uc3Qge3VzZXIsIGFib3V0fSA9IHVzZXJEYXRhO1xuICAgICAgICB0aGlzLl91c2VyLnRleHRDb250ZW50ID0gdXNlcjtcbiAgICAgICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgICB9XG59IiwiZXhwb3J0IGNvbnN0IHBvcHVwUGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfcGhvdG8nKTtcbmV4cG9ydCBjb25zdCBwb3B1cFRpdGxlUGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG5leHBvcnQgY29uc3QgcG9wdXBMaW5rUGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RpdGxlLWltZycpO1xuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZU9wZW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdCcpO1xuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZWRpdC1jYXJkJyk7XG5leHBvcnQgY29uc3QgZm9ybUVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG5leHBvcnQgY29uc3QgZm9ybUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYWRkLWZvcm0nKTtcbmV4cG9ydCBjb25zdCBpbnB1dEFkZFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX3RpdGxlJyk7XG5leHBvcnQgY29uc3QgaW5wdXRBZGRMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2xpbmsnKTtcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpO1xuZXhwb3J0IGNvbnN0IGFib3V0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfYWJvdXQnKTtcbmV4cG9ydCBjb25zdCBuYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RpdGxlJyk7XG5leHBvcnQgY29uc3QgYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fc3VidGl0bGUnKTtcbmV4cG9ydCBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50cycpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkJyk7XG5leHBvcnQgY29uc3QgcG9wdXBBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfYWRkLWNhcmQnKTtcbmV4cG9ydCBjb25zdCBidXR0b25zQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2Nsb3NlJyk7XG5cbmV4cG9ydCBjb25zdCB1c2Vyc0RhdGFFZGl0ID0ge1xuICAgIHVzZXI6IG5hbWUsXG4gICAgYWJvdXQ6IGFib3V0XG59O1xuXG5leHBvcnQgY29uc3QgcG9wdXBTZWxlY3RvcnMgPSB7XG4gICAgcG9wdXBBZGRDYXJkOiAnLnBvcHVwX2FkZC1jYXJkJyxcbiAgICBwb3B1cEVkaXRQcm9maWxlOiAnLnBvcHVwX2VkaXQtY2FyZCcsXG4gICAgcG9wdXBXaXRoSW1nOiAnLnBvcHVwX3Bob3RvJyxcbn1cblxuZXhwb3J0IGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgdXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02MCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiAnZTI0ZGQ0OWEtNDEwMS00NTViLTlmYjUtMzExMDM4ZGZkNzA3JyxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgfVxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4vL9C/0L7Qv9Cw0L8g0L7RgtC60YDRi9GC0LjQtSBcbmV4cG9ydCBmdW5jdGlvbiBvcGVuUG9wdXAocG9wdXBFbGVtZW50KSB7XG4gICAgcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX2FjdGl2ZScpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlUG9wdXBFc2MpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VQb3B1cE92ZXJmbG93KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBvcGVuUG9wdXBJbWcobGluaywgbmFtZSkge1xuICAgIG9wZW5Qb3B1cChwb3B1cFBob3RvKTtcbiAgICBwb3B1cFRpdGxlUGhvdG8uc3JjID0gbmFtZTtcbiAgICBwb3B1cFRpdGxlUGhvdG8uYWx0ID0gbmFtZTtcbiAgICBwb3B1cExpbmtQaG90by50ZXh0Q29udGVudCA9IGxpbms7XG59XG5cbi8v0L/QvtC/0LDQvyDQt9Cw0LrRgNGL0YLQuNC1XG5leHBvcnQgZnVuY3Rpb24gY2xvc2VQb3B1cChwb3B1cEVsZW1lbnQpIHtcbiAgICBwb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfYWN0aXZlJylcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2xvc2VQb3B1cEVzYyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgY2xvc2VQb3B1cE92ZXJmbG93KTtcbn1cblxuLy8g0LfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/INC90LAgZXNjXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VQb3B1cEVzYyhldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICBjb25zdCBwb3B1cEVzYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9hY3RpdmUnKVxuICAgICAgICBjbG9zZVBvcHVwKHBvcHVwRXNjKTtcbiAgICB9XG59XG5cbi8v0LfQsNC60YDRi9GC0LjQtSDQvdCwIG92ZXJmbG93XG5leHBvcnQgZnVuY3Rpb24gY2xvc2VQb3B1cE92ZXJmbG93KGV2dCkge1xuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSkge1xuICAgICAgICBjbG9zZVBvcHVwKGV2dC50YXJnZXQpO1xuICAgIH1cbn1cblxuIiwiXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuLy9pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSBmcm9tICcuLi9jb25zdGFudHMvY29uc3RhbnRzLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgeyB2YWxpZGF0aW9uQ29uZmlnIH0gZnJvbSAnLi4vY29uc3RhbnRzL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgJy4vaW5kZXguY3NzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnXG5pbXBvcnQge1xuICAgIHBvcHVwUGhvdG8sIHBvcHVwVGl0bGVQaG90bywgcG9wdXBMaW5rUGhvdG8sIHBvcHVwUHJvZmlsZU9wZW5CdXR0b24sXG4gICAgcG9wdXBFZGl0UHJvZmlsZSwgZm9ybUVkaXRQcm9maWxlLCBmb3JtQWRkLCBpbnB1dEFkZFRpdGxlLCBpbnB1dEFkZExpbmssXG4gICAgbmFtZUlucHV0LCBhYm91dElucHV0LCBuYW1lLCBhYm91dCwgZWxlbWVudHMsIHByb2ZpbGVBZGQsIHBvcHVwQWRkLFxuICAgIGJ1dHRvbnNDbG9zZSwgdXNlcnNEYXRhRWRpdCwgcG9wdXBTZWxlY3RvcnMsIG9wdGlvbnNcbn0gZnJvbSAnLi4vdXRpbHMvdXRpbHMuanMnO1xuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkob3B0aW9ucyk7XG5hcGkuZ2V0SW5pdGlhbENhcmRzKClcbi50aGVuKCgpID0+IHtcbiAgICBjb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxuICAgICAgICB7XG4gICAgICAgICAgICBpdGVtczogW10sXG4gICAgICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChpdGVtKTtcbiAgICAgICAgICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICwgJy5lbGVtZW50cycpXG4gICAgICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKClcbn0pXG5cbiBjb25zdCBjcmVhdGVDYXJkID0gKGl0ZW0pID0+IHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgJyNlbGVtZW50LXRlbXBsYXRlJyxcbiAgICAoKSA9PiB7IHBvcHVwSW1hZ2Uub3BlbihpdGVtLmxpbmssIGl0ZW0ubmFtZSkgfSk7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbn0gXG5cblxuIC8qY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAgICB7XG4gICAgICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoaXRlbSk7XG4gICAgICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmQpO1xuICAgICAgICB9XG4gICAgfVxuICAgICwgJy5lbGVtZW50cycpXG4vL2NhcmRMaXN0LnJlbmRlckl0ZW1zKCkgKi9cblxuLy8g0L7RgtC+0LHRgNCw0LbQtdC90LjQtSDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LggXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh1c2Vyc0RhdGFFZGl0KTtcblxuXG5jb25zdCBwb3B1cEFib3V0VXNlcnMgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgICBwb3B1cFNlbGVjdG9ycy5wb3B1cEVkaXRQcm9maWxlLFxuICAgICh1c2VyRGF0YSkgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XG4gICAgfVxuKTtcblxuY29uc3QgcG9wdXBBZGRDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gICAgcG9wdXBTZWxlY3RvcnMucG9wdXBBZGRDYXJkLFxuICAgIChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xuICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmQpO1xuICAgIH0pO1xuXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwU2VsZWN0b3JzLnBvcHVwV2l0aEltZyk7XG5cbi8v0L/QvtC/0LDQvyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5wb3B1cFByb2ZpbGVPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxcbiAgICAoZXZ0KSA9PiB7XG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgIGNvbnN0IHt1c2VyLCBhYm91dH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICAgICAgICBuYW1lSW5wdXQudmFsdWUgPSB1c2VyO1xuICAgICAgICBhYm91dElucHV0LnZhbHVlID0gYWJvdXQ7XG4gICAgICAgIHBvcHVwQWJvdXRVc2Vycy5vcGVuKCk7XG4gICAgICAgIGZvcm1WYWxpZEVkaXQuY2xlYXJJbnB1dEVycm9yKCk7XG4gICAgfSk7XG4vL9C/0L7Qv9Cw0L8g0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxucHJvZmlsZUFkZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsXG4gICAgKCkgPT4ge1xuICAgICAgICBwb3B1cEFkZENhcmQub3BlbigpO1xuICAgICAgICBmb3JtVmFsaWRBZGQuc2V0QnV0dG9uU3RhdGUoKTtcbiAgICB9KTtcblxucG9wdXBBYm91dFVzZXJzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy/QstCw0LvQuNC00LDRhtC40Y8g0YTQvtGA0LzRi1xuY29uc3QgZm9ybVZhbGlkQWRkID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUFkZCk7XG5jb25zdCBmb3JtVmFsaWRFZGl0ID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVkaXRQcm9maWxlKTtcbmZvcm1WYWxpZEFkZC5lbmFibGVWYWxpZGF0aW9uKCk7XG5mb3JtVmFsaWRFZGl0LmVuYWJsZVZhbGlkYXRpb24oKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLnVybCA9IG9wdGlvbnMudXJsO1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gICAgfVxuXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L2NhcmRzYCwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldEluZm9Vc2VycygpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS91c2Vycy9tZSBgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnNcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgICAgIH0pXG4gICAgfVxufSJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfdGVtcGxhdGVTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJfZGVsZXRlQ2FyZCIsIl90b2dnbGVDYXJkTGlrZSIsIl9nZXRDYXJkUG9wdXBJbWciLCJwcmV2ZW50RGVmYXVsdCIsInJlbW92ZSIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfbmFtZSIsIl9saW5rIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZWxlbWVudFBob3RvIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJ0aGlzIiwibmFtZSIsImxpbmsiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfY29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiZXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJlIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9jb250YWluZXIiLCJfcmVuZGVyZXIiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlIiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiZm9ybVN1Ym1pdCIsIl9mb3JtU3VibWl0IiwiX2Zvcm0iLCJfaW5wdXRzIiwiX2lucHV0c1ZhbHVlcyIsImlucHV0cyIsInZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltYWdlIiwiX3BvcHVwVGl0bGUiLCJVc2VySW5mbyIsInVzZXIiLCJhYm91dCIsIl91c2VyIiwiX2Fib3V0IiwidXNlckRhdGEiLCJwb3B1cFByb2ZpbGVPcGVuQnV0dG9uIiwiZm9ybUVkaXRQcm9maWxlIiwiZm9ybUFkZCIsIm5hbWVJbnB1dCIsImFib3V0SW5wdXQiLCJwcm9maWxlQWRkIiwidXNlcnNEYXRhRWRpdCIsIm9wdGlvbnMiLCJ1cmwiLCJoZWFkZXJzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImF1dGhvcml6YXRpb24iLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkTGlzdCIsImNhcmQiLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwicG9wdXBJbWFnZSIsIm9wZW4iLCJnZW5lcmF0ZUNhcmQiLCJ1c2VySW5mbyIsInBvcHVwQWJvdXRVc2VycyIsInNldFVzZXJJbmZvIiwicG9wdXBBZGRDYXJkIiwiZ2V0VXNlckluZm8iLCJmb3JtVmFsaWRFZGl0IiwiY2xlYXJJbnB1dEVycm9yIiwiZm9ybVZhbGlkQWRkIiwic2V0QnV0dG9uU3RhdGUiLCJzZXRFdmVudExpc3RlbmVycyIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9